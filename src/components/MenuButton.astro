---
import MenuLink from "./MenuLink.astro";
import HamburgerMenuIcon from "./icons/HamburgerMenuIcon.astro";
---

<div class="inline-block md:hidden">
    <button
        type="button"
        id="toggle-menu"
        class="inline-flex appearance-none items-center justify-center select-none
               relative whitespace-nowrap align-middle outline-transparent rounded-md
               font-semibold transition-colors duration-200 h-10 w-10 text-md ps-4 pe-4
               border border-gray-200 p-0 hover:bg-gray-100">
        <HamburgerMenuIcon />
    </button>
    <div id="mobile-menu" class="invisible translate-y-14 min-w-max absolute top-0 right-0 m-0 z-10">
        <div class="opacity-0 invisible outline-transparent min-w-[14rem] py-2 rounded-md bg-white shadow-sm scale-90">
            <MenuLink name="Home" url="/" />
            <MenuLink name="View source" url="https://github.com/akyrey/akyrey-website" target="_blank" />
        </div>
    </div>
</div>

<script>
    let open = false;

    const toggleMenu = () => {
        open = !open;

        const menu = document.getElementById("mobile-menu");

        if (!menu) {
            return;
        }

        const menuContent = menu.querySelector("div");

        if (!menuContent) {
            return;
        }

        if (open) {
            menu.classList.remove("invisible");
            menu.classList.add("visible");

            menuContent.classList.remove("invisible");
            menuContent.classList.remove("opacity-0");
            menuContent.classList.add("visible");
            menuContent.classList.add("opacity-1");
        } else {
            menu.classList.add("invisible");
            menu.classList.remove("visible");

            menuContent.classList.add("invisible");
            menuContent.classList.add("opacity-0");
            menuContent.classList.remove("visible");
            menuContent.classList.remove("opacity-1");
        }
    }

    document.getElementById("toggle-menu")?.addEventListener("click", toggleMenu);
    document.getElementById("mobile-menu")?.addEventListener("click", toggleMenu);
</script>
